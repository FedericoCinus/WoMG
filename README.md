# WoMG: Word of Mouth Generator

This repository provides a reference implementation of *WoMG* as described in the thesis:<br>
> WoMG: A synthetic Word-of-Mouth cascades Generator.<br>
> Federico Cinus.<br>
> M.Sc. Physics of Complex Systems, Universit√† degli studi di Torino, Turin, 2017-2018.<br>
> <Insert paper link>

The *WoMG* software generates synthetic datasets of documents cascades on network. 
It starts with any (un)directed, (un)weighted graph and a collection of documents and it outputs the propagation DAGs of the docs through the network. 
Diffusion process is guided by the nodes underlying preferences. Please check the [project page]() for more details. 

## Basic Usage

### Example
To run *WoMG* on a **demo** mode, execute the following command from the project home directory:<br/>

``python main.py``

It will generates 100 documents to be spread over the default network (*Les Miserables* http://konect.uni-koblenz.de/networks/moreno_lesmis).

### Options
You can check out the other options available to use with *WoMG* using:<br/>

``python main.py --help``

### Input
1. [Network] The supported input format is an edgelist (txt extension):
	
		node1_id_int node2_id_int <weight_float, optional>
		
You can specify the edgelist path using the *graph* argument:

``python main.py --graph /this/is/an/example/path/Graph_Folder/edgelist.txt``

If no path is given the default network is *Les Miserables* network.

2. [Documents] The supported input format for documents collection (corpus) is txt. You have to specify the folder path containing them using the *docs_folder* argument:

 ``python main.py --docs_folder /this/is/an/example/path/Corpus_Folder``
 
If no documents folder path is given, *WoMG* will be set to generative mode.
  
### Output
Diffusion output file is in a dict format: 

	{time: {doc: [activating nodes]}}

You can specify the output folder path:

  ``python main.py --output /this/is/an/example/path/Output_Folder``




## Usage for researchers
*WoMG* is an open source reasearch project. More details of the software are reported below:

### Input
1. [Network] The supported input format is an edgelist (txt extension):
	
		node1_id_int node2_id_int <weight_float, optional>
		
The graph is assumed to be undirected and unweighted by default. These options can be changed by setting the appropriate flags. You can specify the edgelist path using the *graph* argument):

``python main.py --graph /this/is/an/example/path/Graph_Folder/edgelist.txt``
If no path is given the default network is *Les Miserables* network.

2. [Documents] The supported input format for documents collection (corpus) is txt. You have to specify the folder path containing them using the *docs_folder* argument:

 ``python main.py --docs_folder /this/is/an/example/path/Corpus_Folder``
If no documents folder path is given, WoMG will be set to generative mode.
  
### Output
There are outputs for each class (or model)

1. [Diffusion] file could be in two formats:

  list (default): 
  
	time doc activating_node
  dict : 
  
  	{ time: { doc: [activating nodes] } }

2. [Network] files:
  [info] dict: 
  
	{'type': 'Graph', 'numb_nodes': '77', 'numb_edges': '254', 'aver_degree': '6.5974', 'directed': 'False'} 
	
  [graph] dict: 
  
      {(u, v): [1.3, 0.2, 0.8, ... , 0.91], ...}
      
  Key: link-tuple. Value: weight vector

  [interests and influence vectors] dict:
  
	{(node, 'int'): [interest vector], (node, 'inlf'): [influence vector]}

3. [Topic] files:

  [topic distributions] dict:
  
      {doc: [topic distribution]}
      
  [viralities] dict:
  
      {doc: virality}

One can modify the outputs formats extension with the *format* argument:

  ``python main.py --format pickle``
  ``python main.py --format txt``
  
and specify the output folder path:

  ``python main.py --output /this/is/an/example/path/Output_Folder``


### Options

0. ``topics`` number of topics to be considered in the topic distributions of documents and nodes interests; it has to be less than number of dimensions of the nodes' space provided by node2vec
##### Graph
1. H degree of homophily. Node2vec is used as baseline for generating interests vectors of the nodes starting from the given graph. Parameters *p* and *q* can achieve different decoded degree of homophily and structural equivalence (see paper). The best mix of them can be achieved only by a deep analysis of the network and a grid searh on the parameters. In order to pursuit generality in the input graph we use three degree of mixing: structural equivalence predominant, deepWalk (p=1, q=1), homophily predominant (which are not the best for representing the graph!).  1-H is the degree of social influence between nodes; which is the percentage of the avg interests vecs norms to be assigned to the influence vectors.

##### Documents
2. number of documents TO BE GENERATED by lda, giving this parameter lda will be directly set to generative mode
6. virality of the doc; if virality is high, exponent of the power law is high and threshold for activation is low.

##### Diffusion
3. steps of the diffusion simulation
5. percentage of active nodes with respect to the total number of nodes in the intial configuration (before diffusion) for each doc.

##### Node2Vec

### Citing


	@inproceedings{,
	author = {},
	 title = {},
	 booktitle = {Proceedings},
	 year = {2019}
	}


### Miscellaneous

Please feel free .. 

*Note:* This is only a reference implementation analysis and more details are provided by the thesis.
